<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBRemonts - –ó–∞–ø–∏—Å—å –≤ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 16px;
        }

        input, select, textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s;
            background: #f8f9fa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            background: white;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .date-time-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .service-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .service-option {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .service-option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .service-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .service-option h4 {
            margin-bottom: 5px;
            font-size: 16px;
        }

        .service-option .price {
            font-weight: bold;
            color: #4CAF50;
        }

        .service-option.selected .price {
            color: white;
        }

        .time-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .time-slot {
            flex: 1;
            min-width: 80px;
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-slot:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .time-slot.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .time-slot.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #e9ecef;
        }

        .button {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .loading.spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 30px;
            background: #e8f5e9;
            border-radius: 12px;
            margin-top: 20px;
        }

        .success-message h3 {
            color: #2e7d32;
            margin-bottom: 15px;
        }

        .success-message p {
            color: #666;
            margin-bottom: 10px;
        }

        .error-message {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e1e5e9;
            z-index: 1;
        }

        .step {
            position: relative;
            z-index: 2;
            background: white;
            padding: 0 10px;
            text-align: center;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e1e5e9;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            font-weight: bold;
        }

        .step.active .step-circle {
            background: #667eea;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #666;
        }

        .step.active .step-label {
            color: #667eea;
            font-weight: bold;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .navigation {
            display: flex;
            gap: 10px;
            margin-top: 30px;
        }

        .nav-button {
            flex: 1;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-button:hover {
            background: #e9ecef;
        }

        .nav-button.primary {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .nav-button.primary:hover {
            background: #5a6fd8;
        }

        .language-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lang-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .date-time-group {
                grid-template-columns: 1fr;
            }
            
            .service-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöó SBRemonts</h1>
            <p>–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –≤ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</p>
        </div>

        <!-- Language Selector -->
        <div class="language-selector">
            <button class="lang-btn active" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
            <button class="lang-btn" data-lang="lv">üá±üáª Latvie≈°u</button>
            <button class="lang-btn" data-lang="en">üá¨üáß English</button>
        </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label" data-i18n="step_service">–£—Å–ª—É–≥–∞</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label" data-i18n="step_date">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label" data-i18n="step_info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-circle">4</div>
                <div class="step-label" data-i18n="step_confirm">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
            </div>
        </div>

        <!-- Step 1: Service Selection -->
        <div id="step1" class="step-content active">
            <div class="form-group">
                <label data-i18n="choose_service">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É:</label>
                <div class="service-options" id="servicesContainer">
                    <!-- Services will be loaded dynamically -->
                </div>
                <div class="error-message" id="serviceError" data-i18n="error_service">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</div>
            </div>
            <div class="navigation">
                <button class="nav-button" onclick="nextStep()" data-i18n="btn_next">–î–∞–ª–µ–µ</button>
            </div>
        </div>

        <!-- Step 2: Date and Time -->
        <div id="step2" class="step-content">
            <div class="form-group">
                <label data-i18n="choose_date">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</label>
                <select id="dateSelect" required>
                    <option value="" data-i18n="select_date">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É...</option>
                    <!-- Dates will be loaded dynamically -->
                </select>
                <div class="error-message" id="dateError" data-i18n="error_date">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</div>
            </div>
            
            <div class="form-group">
                <label data-i18n="choose_time">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è:</label>
                <div class="time-slots" id="timeSlotsContainer">
                    <!-- Time slots will be loaded dynamically -->
                </div>
                <div class="error-message" id="timeError" data-i18n="error_time">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</div>
            </div>
            
            <div class="navigation">
                <button class="nav-button" onclick="prevStep()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
                <button class="nav-button primary" onclick="nextStep()" data-i18n="btn_next">–î–∞–ª–µ–µ</button>
            </div>
        </div>

        <!-- Step 3: Personal Information -->
        <div id="step3" class="step-content">
            <div class="form-group">
                <label for="name" data-i18n="label_name">–ò–º—è:</label>
                <input type="text" id="name" required>
                <div class="error-message" id="nameError" data-i18n="error_name">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è</div>
            </div>
            
            <div class="form-group">
                <label for="phone" data-i18n="label_phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                <input type="tel" id="phone" required placeholder="+371">
                <div class="error-message" id="phoneError" data-i18n="error_phone">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω</div>
            </div>
            
            <div class="form-group">
                <label for="car" data-i18n="label_car">–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è:</label>
                <input type="text" id="car" required>
                <div class="error-message" id="carError" data-i18n="error_car">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è</div>
            </div>
            
            <div class="form-group">
                <label for="comment" data-i18n="label_comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                <textarea id="comment"></textarea>
            </div>
            
            <div class="navigation">
                <button class="nav-button" onclick="prevStep()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
                <button class="nav-button primary" onclick="nextStep()" data-i18n="btn_next">–î–∞–ª–µ–µ</button>
            </div>
        </div>

        <!-- Step 4: Confirmation -->
        <div id="step4" class="step-content">
            <div class="form-group">
                <h3 data-i18n="confirm_title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h3>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 20px 0;">
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_service">–£—Å–ª—É–≥–∞:</strong>
                        <span id="confirmService"></span>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_date">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong>
                        <span id="confirmDateTime"></span>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_name">–ò–º—è:</strong>
                        <span id="confirmName"></span>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_phone">–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
                        <span id="confirmPhone"></span>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_car">–ê–≤—Ç–æ–º–æ–±–∏–ª—å:</strong>
                        <span id="confirmCar"></span>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <strong data-i18n="confirm_comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</strong>
                        <span id="confirmComment"></span>
                    </div>
                </div>
                
                <div class="error-message" id="submitError" data-i18n="error_submit"></div>
            </div>
            
            <div class="navigation">
                <button class="nav-button" onclick="prevStep()" data-i18n="btn_back">–ù–∞–∑–∞–¥</button>
                <button class="nav-button primary" onclick="submitBooking()" data-i18n="btn_submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div data-i18n="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage">
            <h3 data-i18n="success_title">‚úÖ –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!</h3>
            <p data-i18n="success_message">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
            <p id="bookingId"></p>
            <p data-i18n="success_close">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥...</p>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            currentLang: 'ru',
            currentStep: 1,
            selectedService: null,
            selectedDate: null,
            selectedTime: null,
            bookingData: {}
        };

        // –¢–µ–∫—Å—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
        const TEXTS = {
            ru: {
                // –®–∞–≥–∏
                step_service: '–£—Å–ª—É–≥–∞',
                step_date: '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è',
                step_info: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
                step_confirm: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ',
                
                // –ö–Ω–æ–ø–∫–∏
                btn_back: '–ù–∞–∑–∞–¥',
                btn_next: '–î–∞–ª–µ–µ',
                btn_submit: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å',
                
                // –ó–∞–≥–æ–ª–æ–≤–∫–∏
                choose_service: '–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É:',
                choose_date: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:',
                choose_time: '–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è:',
                label_name: '–ò–º—è:',
                label_phone: '–¢–µ–ª–µ—Ñ–æ–Ω:',
                label_car: '–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è:',
                label_comment: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):',
                confirm_title: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏',
                confirm_service: '–£—Å–ª—É–≥–∞:',
                confirm_date: '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:',
                confirm_name: '–ò–º—è:',
                confirm_phone: '–¢–µ–ª–µ—Ñ–æ–Ω:',
                confirm_car: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å:',
                confirm_comment: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:',
                
                // –°–æ–æ–±—â–µ–Ω–∏—è
                select_date: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É...',
                loading: '–ó–∞–≥—Ä—É–∑–∫–∞...',
                success_title: '‚úÖ –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!',
                success_message: '–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.',
                success_close: '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥...',
                
                // –û—à–∏–±–∫–∏
                error_service: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É',
                error_date: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É',
                error_time: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è',
                error_name: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è',
                error_phone: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω',
                error_car: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è',
                error_submit: ''
            },
            lv: {
                // –®–∞–≥–∏
                step_service: 'Pakalpojums',
                step_date: 'Datums un laiks',
                step_info: 'InformƒÅcija',
                step_confirm: 'ApstiprinƒÅjums',
                
                // –ö–Ω–æ–ø–∫–∏
                btn_back: 'Atpakaƒº',
                btn_next: 'TƒÅlƒÅk',
                btn_submit: 'ApstiprinƒÅt pierakstu',
                
                // –ó–∞–≥–æ–ª–æ–≤–∫–∏
                choose_service: 'Izvƒìlieties pakalpojumu:',
                choose_date: 'Izvƒìlieties datumu:',
                choose_time: 'Izvƒìlieties laiku:',
                label_name: 'VƒÅrds:',
                label_phone: 'Telefons:',
                label_car: 'Automa≈°ƒ´nas marka un modelis:',
                label_comment: 'KomentƒÅrs (nav obligƒÅts):',
                confirm_title: 'Pieraksta apstiprinƒÅjums',
                confirm_service: 'Pakalpojums:',
                confirm_date: 'Datums un laiks:',
                confirm_name: 'VƒÅrds:',
                confirm_phone: 'Telefons:',
                confirm_car: 'Automa≈°ƒ´na:',
                confirm_comment: 'KomentƒÅrs:',
                
                // –°–æ–æ–±—â–µ–Ω–∏—è
                select_date: 'Izvƒìlieties datumu...',
                loading: 'IelƒÅdƒì...',
                success_title: '‚úÖ Pieraksts veiksmƒ´gi izveidots!',
                success_message: 'Mƒìs ar jums sazinƒÅsimies, lai apstiprinƒÅtu.',
                success_close: 'Lietotne aizvƒìrsies automƒÅtiski pƒìc 5 sekundƒìm...',
                
                // –û—à–∏–±–∫–∏
                error_service: 'L≈´dzu, izvƒìlieties pakalpojumu',
                error_date: 'L≈´dzu, izvƒìlieties datumu',
                error_time: 'L≈´dzu, izvƒìlieties laiku',
                error_name: 'L≈´dzu, ievadiet vƒÅrdu',
                error_phone: 'L≈´dzu, ievadiet telefona numuru',
                error_car: 'L≈´dzu, ievadiet automa≈°ƒ´nas marku',
                error_submit: ''
            },
            en: {
                // –®–∞–≥–∏
                step_service: 'Service',
                step_date: 'Date & Time',
                step_info: 'Information',
                step_confirm: 'Confirmation',
                
                // –ö–Ω–æ–ø–∫–∏
                btn_back: 'Back',
                btn_next: 'Next',
                btn_submit: 'Confirm Booking',
                
                // –ó–∞–≥–æ–ª–æ–≤–∫–∏
                choose_service: 'Choose service:',
                choose_date: 'Choose date:',
                choose_time: 'Choose time:',
                label_name: 'Name:',
                label_phone: 'Phone:',
                label_car: 'Car brand and model:',
                label_comment: 'Comment (optional):',
                confirm_title: 'Booking Confirmation',
                confirm_service: 'Service:',
                confirm_date: 'Date & Time:',
                confirm_name: 'Name:',
                confirm_phone: 'Phone:',
                confirm_car: 'Car:',
                confirm_comment: 'Comment:',
                
                // –°–æ–æ–±—â–µ–Ω–∏—è
                select_date: 'Choose date...',
                loading: 'Loading...',
                success_title: '‚úÖ Booking created successfully!',
                success_message: 'We will contact you to confirm.',
                success_close: 'App will close automatically in 5 seconds...',
                
                // –û—à–∏–±–∫–∏
                error_service: 'Please choose a service',
                error_date: 'Please choose a date',
                error_time: 'Please choose a time',
                error_name: 'Please enter name',
                error_phone: 'Please enter phone number',
                error_car: 'Please enter car brand',
                error_submit: ''
            }
        };

        // –£—Å–ª—É–≥–∏ (–º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞)
        const SERVICES = {
            ru: [
                { id: 'diagnostics', name: 'üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞', price: '–æ—Ç 20 ‚Ç¨', description: '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è' },
                { id: 'oil_change', name: 'üõ¢Ô∏è –ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞', price: '30 ‚Ç¨', description: '–ó–∞–º–µ–Ω–∞ –º–æ—Ç–æ—Ä–Ω–æ–≥–æ –º–∞—Å–ª–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞' },
                { id: 'brakes', name: 'üõë –†–µ–º–æ–Ω—Ç —Ç–æ—Ä–º–æ–∑–æ–≤', price: '–æ—Ç 20 ‚Ç¨', description: '–†–µ–º–æ–Ω—Ç –∏ –∑–∞–º–µ–Ω–∞ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã' },
                { id: 'suspension', name: 'üåÄ –†–µ–º–æ–Ω—Ç –ø–æ–¥–≤–µ—Å–∫–∏', price: '–æ—Ç 15 ‚Ç¨', description: '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç —Ö–æ–¥–æ–≤–æ–π —á–∞—Å—Ç–∏' },
                { id: 'electrical', name: 'üîå –≠–ª–µ–∫—Ç—Ä–∏–∫–∞', price: '–æ—Ç 10 ‚Ç¨', description: '–†–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è' },
                { id: 'engine', name: '‚öôÔ∏è –†–µ–º–æ–Ω—Ç –¥–≤–∏–≥–∞—Ç–µ–ª—è', price: '–æ—Ç 40 ‚Ç¨', description: '–†–µ–º–æ–Ω—Ç –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è' },
                { id: 'other', name: 'üí¨ –î—Ä—É–≥–æ–µ', price: '–ø–æ –∑–∞–ø—Ä–æ—Å—É', description: '–î—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏ –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞' }
            ],
            lv: [
                { id: 'diagnostics', name: 'üõ†Ô∏è Diagnostika', price: 'no 20 ‚Ç¨', description: 'Pilnƒ´ga automa≈°ƒ´nas diagnostika' },
                { id: 'oil_change', name: 'üõ¢Ô∏è Eƒºƒºas mai≈Üa', price: '30 ‚Ç¨', description: 'Motora eƒºƒºas un filtra mai≈Üa' },
                { id: 'brakes', name: 'üõë Brem≈æu remonts', price: 'no 20 ‚Ç¨', description: 'Brem≈æu sistƒìmas remonts un nomai≈Üa' },
                { id: 'suspension', name: 'üåÄ Piekares remonts', price: 'no 15 ‚Ç¨', description: 'Piekabes diagnostika un remonts' },
                { id: 'electrical', name: 'üîå Elektrƒ´ba', price: 'no 10 ‚Ç¨', description: 'ElektroiekƒÅrtu remonts' },
                { id: 'engine', name: '‚öôÔ∏è Dzinƒìja remonts', price: 'no 40 ‚Ç¨', description: 'Dzinƒìja remonts un diagnostika' },
                { id: 'other', name: 'üí¨ Cits', price: 'pƒìc pieprasƒ´juma', description: 'Citi auto servisa pakalpojumi' }
            ],
            en: [
                { id: 'diagnostics', name: 'üõ†Ô∏è Diagnostics', price: 'from 20 ‚Ç¨', description: 'Comprehensive vehicle diagnostics' },
                { id: 'oil_change', name: 'üõ¢Ô∏è Oil change', price: '30 ‚Ç¨', description: 'Engine oil and filter replacement' },
                { id: 'brakes', name: 'üõë Brake repair', price: 'from 20 ‚Ç¨', description: 'Brake system repair and replacement' },
                { id: 'suspension', name: 'üåÄ Suspension repair', price: 'from 15 ‚Ç¨', description: 'Chassis diagnostics and repair' },
                { id: 'electrical', name: 'üîå Electrical', price: 'from 10 ‚Ç¨', description: 'Electrical equipment repair' },
                { id: 'engine', name: '‚öôÔ∏è Engine repair', price: 'from 40 ‚Ç¨', description: 'Engine repair and diagnostics' },
                { id: 'other', name: 'üí¨ Other', price: 'on request', description: 'Other auto service services' }
            ]
        };

        // –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
        const TIME_SLOTS = ['10:00', '12:00', '14:00', '16:00', '18:00'];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
            initTelegramWebApp();
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ª—É–≥
            loadServices();
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç
            loadDates();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
            setupLanguage();
            
            // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            prefillUserData();
        });

        function initTelegramWebApp() {
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã
                Telegram.WebApp.setHeaderColor('#667eea');
                Telegram.WebApp.setBackgroundColor('#fafbfc');
                
                console.log('Telegram Web App initialized');
            } else {
                console.warn('Telegram Web App not detected - running in standalone mode');
            }
        }

        function prefillUserData() {
            if (window.Telegram && window.Telegram.WebApp) {
                const user = Telegram.WebApp.initDataUnsafe.user;
                if (user) {
                    // –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º –∏–º—è
                    const nameField = document.getElementById('name');
                    if (nameField && user.first_name) {
                        let fullName = user.first_name;
                        if (user.last_name) {
                            fullName += ' ' + user.last_name;
                        }
                        nameField.value = fullName;
                    }
                    
                    // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å user.username, user.id –∏ —Ç.–¥.
                }
            }
        }

        function setupLanguage() {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    changeLanguage(lang);
                });
            });
        }

        function changeLanguage(lang) {
            CONFIG.currentLang = lang;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ç–µ–∫—Å—Ç—ã
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (TEXTS[lang] && TEXTS[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = TEXTS[lang][key];
                    } else {
                        element.textContent = TEXTS[lang][key];
                    }
                }
            });
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —É—Å–ª—É–≥–∏ –Ω–∞ –Ω–æ–≤–æ–º —è–∑—ã–∫–µ
            loadServices();
        }

        function loadServices() {
            const container = document.getElementById('servicesContainer');
            if (!container) return;
            
            container.innerHTML = '';
            const services = SERVICES[CONFIG.currentLang] || SERVICES.ru;
            
            services.forEach(service => {
                const div = document.createElement('div');
                div.className = `service-option ${CONFIG.selectedService === service.id ? 'selected' : ''}`;
                div.dataset.id = service.id;
                div.innerHTML = `
                    <h4>${service.name}</h4>
                    <div class="price">${service.price}</div>
                    <small>${service.description}</small>
                `;
                
                div.addEventListener('click', () => {
                    document.querySelectorAll('.service-option').forEach(el => el.classList.remove('selected'));
                    div.classList.add('selected');
                    CONFIG.selectedService = service.id;
                    CONFIG.bookingData.service = service.name;
                    CONFIG.bookingData.service_id = service.id;
                    hideError('serviceError');
                });
                
                container.appendChild(div);
            });
        }

        function loadDates() {
            const select = document.getElementById('dateSelect');
            if (!select) return;
            
            // –û—á–∏—â–∞–µ–º –æ–ø—Ü–∏–∏ (–∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π)
            while (select.options.length > 1) {
                select.remove(1);
            }
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ 7 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π
            const dates = getNextWorkingDays(7);
            
            dates.forEach(date => {
                const option = document.createElement('option');
                option.value = date.formatted;
                option.textContent = date.display;
                select.appendChild(option);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
            select.addEventListener('change', function() {
                CONFIG.selectedDate = this.value;
                if (this.value) {
                    hideError('dateError');
                    loadTimeSlots(this.value);
                }
            });
        }

        function getNextWorkingDays(count) {
            const dates = [];
            const today = new Date();
            
            for (let i = 0; i < count * 2; i++) { // –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ 2 —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ
                if (dates.length >= count) break;
                
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –≤—ã—Ö–æ–¥–Ω—ã–µ (0=–í—Å, 6=–°–±)
                if (date.getDay() !== 0 && date.getDay() !== 6) {
                    const formatted = formatDate(date);
                    const display = formatDateDisplay(date, CONFIG.currentLang);
                    dates.push({ date, formatted, display });
                }
            }
            
            return dates;
        }

        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}.${month}.${year}`;
        }

        function formatDateDisplay(date, lang) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            
            const weekdays = {
                ru: ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'],
                lv: ['Sv', 'P', 'O', 'T', 'C', 'Pk', 'S'],
                en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
            };
            
            const weekday = weekdays[lang]?.[date.getDay()] || weekdays.ru[date.getDay()];
            return `${day}.${month}.${year} (${weekday})`;
        }

        function loadTimeSlots(date) {
            const container = document.getElementById('timeSlotsContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            TIME_SLOTS.forEach(time => {
                const div = document.createElement('div');
                div.className = `time-slot ${CONFIG.selectedTime === time ? 'selected' : ''}`;
                div.textContent = time;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É)
                const isAvailable = checkTimeAvailability(date, time);
                if (!isAvailable) {
                    div.classList.add('disabled');
                } else {
                    div.addEventListener('click', () => {
                        if (!div.classList.contains('disabled')) {
                            document.querySelectorAll('.time-slot').forEach(el => el.classList.remove('selected'));
                            div.classList.add('selected');
                            CONFIG.selectedTime = time;
                            hideError('timeError');
                        }
                    });
                }
                
                container.appendChild(div);
            });
        }

        function checkTimeAvailability(date, time) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            // –°–µ–π—á–∞—Å –ø—Ä–æ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –ø–æ–º–µ—á–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ—Ç—ã –∫–∞–∫ –∑–∞–Ω—è—Ç—ã–µ
            return Math.random() > 0.3; // 70% —Å–ª–æ—Ç–æ–≤ —Å–≤–æ–±–æ–¥–Ω—ã
        }

        function nextStep() {
            // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞
            if (!validateStep(CONFIG.currentStep)) {
                return;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
            document.getElementById(`step${CONFIG.currentStep}`).classList.remove('active');
            document.querySelector(`.step[data-step="${CONFIG.currentStep}"]`).classList.remove('active');
            
            CONFIG.currentStep++;
            
            document.getElementById(`step${CONFIG.currentStep}`).classList.add('active');
            document.querySelector(`.step[data-step="${CONFIG.currentStep}"]`).classList.add('active');
            
            // –ï—Å–ª–∏ —ç—Ç–æ —à–∞–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
            if (CONFIG.currentStep === 4) {
                updateConfirmation();
            }
        }

        function prevStep() {
            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É
            document.getElementById(`step${CONFIG.currentStep}`).classList.remove('active');
            document.querySelector(`.step[data-step="${CONFIG.currentStep}"]`).classList.remove('active');
            
            CONFIG.currentStep--;
            
            document.getElementById(`step${CONFIG.currentStep}`).classList.add('active');
            document.querySelector(`.step[data-step="${CONFIG.currentStep}"]`).classList.add('active');
        }

        function validateStep(step) {
            let isValid = true;
            
            switch(step) {
                case 1:
                    if (!CONFIG.selectedService) {
                        showError('serviceError');
                        isValid = false;
                    }
                    break;
                    
                case 2:
                    if (!CONFIG.selectedDate) {
                        showError('dateError');
                        isValid = false;
                    }
                    if (!CONFIG.selectedTime) {
                        showError('timeError');
                        isValid = false;
                    }
                    break;
                    
                case 3:
                    const name = document.getElementById('name').value.trim();
                    const phone = document.getElementById('phone').value.trim();
                    const car = document.getElementById('car').value.trim();
                    
                    if (!name) {
                        showError('nameError');
                        isValid = false;
                    } else {
                        CONFIG.bookingData.name = name;
                    }
                    
                    if (!phone) {
                        showError('phoneError');
                        isValid = false;
                    } else {
                        CONFIG.bookingData.phone = phone;
                    }
                    
                    if (!car) {
                        showError('carError');
                        isValid = false;
                    } else {
                        CONFIG.bookingData.car = car;
                    }
                    
                    CONFIG.bookingData.comment = document.getElementById('comment').value.trim();
                    CONFIG.bookingData.date = CONFIG.selectedDate;
                    CONFIG.bookingData.time = CONFIG.selectedTime;
                    CONFIG.bookingData.language = CONFIG.currentLang;
                    break;
            }
            
            return isValid;
        }

        function updateConfirmation() {
            document.getElementById('confirmService').textContent = CONFIG.bookingData.service || '-';
            document.getElementById('confirmDateTime').textContent = `${CONFIG.selectedDate} ${CONFIG.selectedTime}`;
            document.getElementById('confirmName').textContent = CONFIG.bookingData.name || '-';
            document.getElementById('confirmPhone').textContent = CONFIG.bookingData.phone || '-';
            document.getElementById('confirmCar').textContent = CONFIG.bookingData.car || '-';
            document.getElementById('confirmComment').textContent = CONFIG.bookingData.comment || TEXTS[CONFIG.currentLang].no_comment || '-';
        }

        function showError(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.style.display = 'block';
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –æ—à–∏–±–∫–µ
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function hideError(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.style.display = 'none';
            }
        }

        async function submitBooking() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            document.getElementById('loading').style.display = 'block';
            document.getElementById('submitError').style.display = 'none';
            
            try {
                // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const bookingData = {
                    ...CONFIG.bookingData,
                    timestamp: new Date().toISOString()
                };
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram –±–æ—Ç —á–µ—Ä–µ–∑ Web App API
                if (window.Telegram && window.Telegram.WebApp) {
                    Telegram.WebApp.sendData(JSON.stringify(bookingData));
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                    document.getElementById('step4').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    document.getElementById('loading').style.display = 'none';
                    
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID –∑–∞–ø–∏—Å–∏
                    const bookingId = 'WEB-' + Date.now();
                    document.getElementById('bookingId').textContent = 
                        `${TEXTS[CONFIG.currentLang].booking_id || 'ID –∑–∞–ø–∏—Å–∏'}: ${bookingId}`;
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        Telegram.WebApp.close();
                    }, 5000);
                    
                } else {
                    // –†–µ–∂–∏–º –±–µ–∑ Telegram (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
                    console.log('Booking data:', bookingData);
                    
                    document.getElementById('step4').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    document.getElementById('loading').style.display = 'none';
                    
                    const bookingId = 'WEB-' + Date.now();
                    document.getElementById('bookingId').textContent = 
                        `${TEXTS[CONFIG.currentLang].booking_id || 'ID –∑–∞–ø–∏—Å–∏'}: ${bookingId}`;
                }
                
            } catch (error) {
                console.error('Error submitting booking:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('submitError').style.display = 'block';
                document.getElementById('submitError').textContent = 
                    TEXTS[CONFIG.currentLang].submit_error || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
            }
        }

        // –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        window.nextStep = nextStep;
        window.prevStep = prevStep;
        window.submitBooking = submitBooking;
    </script>
</body>
</html>
